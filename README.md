Что такое паттерн Builder?
Паттерн Builder (Строитель) – это порождающий шаблон проектирования, который используется для пошагового создания
сложных объектов. Вместо того чтобы создавать объект сразу с большим количеством аргументов в конструкторе, мы разделяем
процесс создания на последовательные шаги.

Основные принципы паттерна Builder:

Отделение процесса создания объекта от его представления – клиентский код не должен заботиться о том, как именно
создается объект.
Гибкость в конфигурации – можно динамически задавать параметры объекта, не перегружая конструктор.
Читаемость кода – создание объекта становится интуитивно понятным и структурированным.

˜˜˜
class Car:
    def __init__(self, engine, wheels, color):
        self.engine = engine
        self.wheels = wheels
        self.color = color

class CarBuilder:
    def __init__(self):
        self.engine = None
        self.wheels = 4
        self.color = "white"

    def set_engine(self, engine):
        self.engine = engine
        return self

    def set_color(self, color):
        self.color = color
        return self

    def build(self):
        return Car(self.engine, self.wheels, self.color)

# Использование:
builder = CarBuilder()
car = builder.set_engine("V8").set_color("red").build()

˜˜˜

Схема инициализации через Public Builder
Ниже показано, как Public Builder встроен в общую архитектуру API-клиентов.

                   ┌──────────────────────────┐
                   │      httpx.Client        │
                   │ (отправка HTTP-запросов) │
                   └───────────┬──────────────┘
                               │
                       создаётся через
                               │
               ┌───────────────▼────────────────┐
               │ get_public_http_client()       │
               │ Public Builder:                │
               │  - base_url="http://localhost" │
               │  - timeout=100                 │
               └───────────────┬────────────────┘
                               │
               ┌───────────────▼────────────────┐
               │            APIClient           │
               │ (базовые методы: get/post/…)   │
               └───────────────┬────────────────┘
                               │
          ┌────────────────────▼─────────────────────┐
          │                                          │
┌─────────────────────────────┐            ┌────────────────────────────┐
│ AuthenticationClient        │            │ PublicUsersClient          │
│  - login_api()              │            │  - create_user_api()       │
│  - refresh_api()            │            │                            │
└─────────────┬───────────────┘            └──────────────┬─────────────┘
              │                                           │
┌─────────────▼───────────────┐              ┌────────────▼───────────────┐
│ get_authentication_client() │              │ get_public_users_client()  │
│ (возвращает готовый клиент) │              │ (возвращает готовый клиент)│
└─────────────────────────────┘              └────────────────────────────┘
